<div class="surface-50 px-4 py-2 md:px-6 lg:px-8">
    <div class="grid -mr-3 -ml-3">
        <div class="col-12 p-4">
            <div class="surface-card grid formgrid p-fluid border-round shadow-2 p-4">
                <div class="col-12 mb-4 flex flex-column lg:flex-row align-items-center justify-content-between">
                    <div class="text-900 font-medium text-xl">Statistics</div>
                </div>
                <div class="col-12 lg:col-6 field mb-3">
                    <label for="start" class="text-900 font-medium mb-3">Start</label>
                    <p-calendar (onSelect)="loadTimedData()" id="start" [(ngModel)]="start" dataType="string"
                        dateFormat="yy-mm-dd" class="text-900 font-medium mb-3"></p-calendar>

                </div>
                <div class="col-12 lg:col-6 field mb-3">
                    <label for="start" class="text-900 font-medium mb-3">End</label>
                    <p-calendar (onSelect)="loadTimedData()" id="end" [(ngModel)]="end" dataType="string"
                        dateFormat="yy-mm-dd" class="text-900 font-medium mb-3"></p-calendar>
                </div>

                <p-divider class="w-full mb-3"></p-divider>

                <div class="col-12 lg:col-6 field">
                    <div class="text-900 font-medium">Average Revenue</div>
                    <div class="text-blue-500 font-bold text-5xl w-full h-full flex align-items-center justify-content-center">{{avgRevenue | currency}}</div>
                </div>
                <div class="col-12 lg:col-6 field">
                    <label for="revenueForInterval" class="text-900 font-medium">Revenue over time</label>
                    <p-chart id="revenueForInterval" type="line" class="w-full h-full" [data]="data"></p-chart>
                </div>
                <div class="col-12 lg:col-6 field">
                    <label for="openClosedCarts" class="text-900 font-medium mb-3">Ratio of open to closed carts</label>
                    <p-chart id="openClosedCarts" type="doughnut" class="flex justify-content-center align-items-center w-full h-full" [data]="doughnutData"></p-chart>
                </div>
                <div class="col-12 lg:col-6 field">
                    <div class="text-900 font-medium mb-3">Most sold products</div>
                    <p-inputNumber class="mb-3" [(ngModel)]="productCount" (focusout)="loadMostSoldProducts()" mode="decimal"
                    [showButtons]="true" [min]="1">
                    </p-inputNumber>
                    
                    <p-table [columns]="cols" [value]="soldProducts">
                        <ng-template pTemplate="header" let-columns>
                            <tr>
                                <th *ngFor="let col of columns">
                                    {{col.header}}
                                </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-rowData let-columns="columns">
                            <tr>
                                <td *ngFor="let col of columns">
                                    {{rowData[col.field]}}
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>
        </div>
    </div>
</div>